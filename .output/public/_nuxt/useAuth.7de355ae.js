import{m as t,k as r,s as i}from"./entry.3decec21.js";async function f(){const e=t("user");if(!t("auth_token").value&&!e.value){const s=JSON.parse(window.sessionStorage.getItem("m_auth_ss"));t("auth_token").value=s==null?void 0:s.token,e.value=s==null?void 0:s.user}return e.value}async function h(e,o){t("auth_token").value=e,t("user").value=o,window.sessionStorage.setItem("m_auth_ss",JSON.stringify({token:e,user:o}))}async function S(){const e=i(),o={Authorization:"Bearer "+t("auth_token").value};await $fetch(`${e.BASE_URL}/auth/logout`,{method:"POST",headers:o}),t("user").value=null,m()}async function _(e,o){const s=i();console.log("base url",s.BASE_URL);try{const{data:a,token:u,message:c,statusCode:l,error:n}=await $fetch(`${s.BASE_URL}/auth/login`,{method:"POST",body:{email:e,password:o}});if(n)return window.alert(n),{hasErrors:!0,errors:new Map([["email",{check:"email",message:n}]])};console.log(u,c,n,l),h(u,a),await r().push("/")}catch(a){console.log(a)}}async function m(){window.sessionStorage.removeItem("m_auth_ss"),r().push("/login")}export{S as a,_ as l,m as r,f as u};
